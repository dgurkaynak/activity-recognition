if("undefined"==typeof zig){eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}));(function(){function x(b){function e(b,d){function g(a){if(a.skeletonTracked&&a.skeleton.hasOwnProperty(b)){if(!f){d.mappedJoint=b;f=true;e.fireEvent("sessionstart",a.skeleton[b].position)}e.fireEvent("sessionupdate",a.skeleton[b].position)}else if(f){f=false;delete d.mappedJoint;e.fireEvent("sessionend")}}var e=a();var f=false;var h={onuserupdate:g};e.eventify(h);h.addListener(d);c.addListener(h);return h}function d(a){c.id=a.id;c.positionTracked=true;c.position=a.centerofmass;c.skeletonTracked=a.tracked>0;var b=a.joints;var d={};for(var e=0;e<b.length;e++){d[b[e].id]=b[e]}c.skeleton=d}var c={id:0,positionTracked:false,position:[0,0,0],skeletonTracked:false,skeleton:{},mapJointToControl:e,update:d};d(b);return c}function w(){var a;var b;var c}function v(b){function g(a){var b=e.indexOf(a);if(-1!=b){e.splice(b,1);c.fireEvent("userdisengaged",a)}}function f(a){if(e.length<b){for(var d in a.users)if(a.users.hasOwnProperty(d)){var f=a.users[d];if(f.skeletonTracked&&-1==e.indexOf(f)){if(e.length<b){e.push(f);c.fireEvent("userengaged",f)}}}if(e.length==b){c.fireEvent("allusersengaged",e)}}}if(undefined===b){b=1}var c=a();var d={onuserlost:g,ondataupdate:f};c.eventify(d);var e=[];return d}function u(){function i(a){if(a.id==d){g(a)}}function h(a){var b=t();b.bbox.resize(c.bboxBounds);b.bboxOffset=c.bboxOffset;b.addEventListener("sessionstart",function(b){e(a,b)});b.addEventListener("sessionupdate",function(b){f(a,b)});b.addEventListener("sessionend",function(){g(a)});a.addListener(b)}function g(a){if(a.id==d){d=0;c.engagedUser=null;b.fireEvent("sessionend");b.fireEvent("userdisengaged",a)}}function f(a,c){if(a.id==d){b.fireEvent("sessionupdate",c)}}function e(a,e){if(d!=0)return;d=a.id;c.engagedUser=a;b.fireEvent("userengaged",a);b.fireEvent("sessionstart",e)}var b=a();var c={onuserfound:h,onuserlost:i,engagedUser:null,bboxBounds:[1e3,500,500],bboxOffset:[0,250,-300]};b.eventify(c);var d=0;return c}function t(){function x(a,b){var c=b[0];var d=b[1];var e=b[2];var f=Math.sqrt(c*c+d*d+e*e);var g=Math.sqrt(c*c+e*e);var h=(c*c+e*e)/(g*f);var i=Math.acos(h);if(d<0)i=-i;var j=e/g;var k=Math.acos(j);if(c>0)k=-k;return Matrix.RotationX(i).x(Matrix.RotationY(k)).x($V(a)).elements}function w(){if(f){f=false;c.fireEvent("sessionend")}}function v(a){w();f=true;h=a;m=q(n.skeleton[a].position);c.fireEvent("sessionstart",m)}function u(a){e=g(e,a.position,.5);if(f){if(!r(a.skeleton[h].position)){i++;if(i>=k){i=0;w()}}else{i=0;var b=q(a.skeleton[h].position);if(d.shouldSmoothPoints){b=g(m,b,.8)}m=b;c.fireEvent("sessionupdate",m)}}}function t(a){if(f)return;if(r(n.skeleton[a.mappedJoint].position)){v(a.mappedJoint)}}function r(a){var b=q(n.position);d.bbox.recenter($V(b).add($V(d.bboxOffset)));return d.bbox.contains(q(a))}function q(a){return d.shouldRotateHand?x(a,e):a}function p(a){if(f){f=false;c.fireEvent("sessionend")}n=undefined}function o(a){n=a;e=a.position;if(d.startOnWave){var b=s();var c=s();b.addEventListener("wave",t);c.addEventListener("wave",t);a.mapJointToControl(j.LeftHand,b);a.mapJointToControl(j.RightHand,c)}if(d.startOnSteady){var f=l();var g=l();f.addEventListener("steady",t);g.addEventListener("steady",t);a.mapJointToControl(j.LeftHand,f);a.mapJointToControl(j.RightHand,g)}}var c=a();var d={shouldRotateHand:true,shouldSmoothPoints:true,onuserupdate:u,onattach:o,ondetach:p,startSession:v,stopSession:w,startOnWave:true,startOnSteady:true,bbox:b([1e3,500,500]),bboxOffset:[0,250,-300]};c.eventify(d);var e;var f=false;var h;var i=0;var k=15;var m=undefined;var n;return d}function s(){function h(a){a.removeListener(b)}function g(a){a.addListener(b)}var b=m(k.X,100);b.autoMoveToContain=true;b.driftAmount=15;var c={onattach:g,ondetach:h,fader:b,numberOfWaves:5};var d=a();d.eventify(c);var e=[];var f=-1;b.addEventListener("edge",function(a){var b=(new Date).getTime();while(e.length>0&&b-e[0]>2e3)e.shift();if(e.length==0)f=-1;if(f!=a.value)e.push(b);f=a.value;if(e.length>=c.numberOfWaves){d.fireEvent("wave",c);e=[]}});return c}function r(){function g(a){a.removeListener(b);a.removeListener(c)}function f(a){a.addListener(b);a.addListener(c)}var b=o();var c=p();var d=a();var e={onattach:f,ondetach:g,pushDetector:c,fader2d:b,value:[0,0],x:0,y:0};d.eventify(e);b.addEventListener("valuechange",function(a){e.value[0]=e.x=a.value[0];e.value[1]=e.y=1-a.value[1];d.fireEvent("move",e)});c.addEventListener("push",function(a){d.fireEvent("push",e)});c.addEventListener("release",function(a){d.fireEvent("release",e)});c.addEventListener("click",function(a){d.fireEvent("click",e)});return e}function q(){function i(a){a.removeListener(c);a.removeListener(d)}function h(a){a.addListener(c);a.addListener(d)}function g(a){if(undefined!==a.swipeValue){if(Math.abs(a.swipeValue-a.value)>=.5){delete a.swipeValue;a.driftAmount=e.driftAmount;b.fireEvent("swiperelease",e)}}}function f(a){var c=a.swipeDirections[a.value];b.fireEvent("swipe"+c,e);b.fireEvent("swipe",c);a.driftAmount=0;a.swipeValue=a.value}var b=a();var c=m(k.X);var d=m(k.Y);var e={driftAmount:20,horizontalFader:c,verticalFader:d,isSwiped:false,onattach:h,ondetach:i,onedge:f,onvaluechange:g};b.eventify(e);c.autoMoveToContain=true;d.autoMoveToContain=true;c.driftAmount=e.driftAmount;d.driftAmount=e.driftAmount;c.swipeDirections=["left","right"];d.swipeDirections=["down","up"];c.addListener(e);d.addListener(e);return e}function p(b){function i(){var a=(new Date).getTime()-c.pushTime;return a<1e3}function h(){e.onsessionend();if(c.isPushed){c.isPushed=false;d.fireEvent("release",c)}}function g(a){e.moveToContain(a);e.onsessionupdate(a);c.pushProgress=e.value;if(!c.isPushed){if(1==c.pushProgress){c.isPushed=true;c.pushTime=(new Date).getTime();c.pushPosition=a;e.driftAmount=0;d.fireEvent("push",c)}}else{if(c.pushProgress<.5){c.isPushed=false;e.driftAmount=c.driftAmount;if(i()){d.fireEvent("click",c)}d.fireEvent("release",c)}}}function f(a){e.onsessionstart(a)}b=b||200;var c={isPushed:false,pushProgress:0,pushTime:0,driftAmount:15,fader:undefined,onsessionstart:f,onsessionupdate:g,onsessionend:h};var d=a();d.eventify(c);var e=m(k.Z,b);e.flip=true;e.initialValue=.2;e.autoMoveToContain=true;c.fader=e;e.driftAmount=c.driftSpeed;return c}function o(b,c){function i(){f.onsessionend()}function h(a){f.size[0]=e.width;f.size[1]=e.height;f.onsessionupdate(a)}function g(a){f.onsessionstart(a)}b=b||300;c=c||250;var d=a();var e={width:b,height:c,value:[0,0],onsessionstart:g,onsessionupdate:h,onsessionend:i};d.eventify(e);var f=n([b,c,1]);f.addEventListener("valuechange",function(a){e.value[0]=a.value[0];e.value[1]=a.value[1];d.fireEvent("valuechange",e)});return e}function n(b){function j(a,b){f[0]=a[0]+(.5-b[0])*e.size[0];f[1]=a[1]+(.5-b[1])*e.size[1];f[2]=a[2]+(.5-b[2])*e.size[2]}function i(a){e.value=a;c.fireEvent("valuechange",e)}function h(a){var b=$V(a).subtract($V(f)).elements;var c=[d(b[0]/e.size[0]+.5,0,1),d(b[1]/e.size[1]+.5,0,1),d(b[2]/e.size[2]+.5,0,1)];i(c)}function g(a){j(a,e.initialValue)}var c=a();var e={size:b,value:[0,0,0],initialValue:[.5,.5,.5],onsessionstart:g,onsessionupdate:h,onsessionend:function(){}};c.eventify(e);var f=[0,0,0];return e}function m(b,e){function q(a){var b=a[f.orientation]-i[f.orientation];if(b>f.size/2){i[f.orientation]+=b-f.size/2}else if(b<f.size/-2){i[f.orientation]+=b+f.size/2}}function p(a,b){if(f.flip)b=1-b;i[f.orientation]=a[f.orientation]+(.5-b)*f.size}function o(a){var b=f.hoverItem;var c=f.hoverItem*(1/f.itemsCount)-f.hysteresis;var d=(f.hoverItem+1)*(1/f.itemsCount)+f.hysteresis;f.value=a;g.fireEvent("valuechange",f);var e=a==0||a==1;if(!h&&e){g.fireEvent("edge",f)}h=e;if(f.value>d){b++}if(f.value<c){b--}if(b!=f.hoverItem){g.fireEvent("hoverstop",f);f.hoverItem=b;g.fireEvent("hoverstart",f)}}function n(a){j.markframe();if(f.autoMoveToContain){q(a)}var b=a[f.orientation]-i[f.orientation];var c=b/f.size+.5;c=d(c,0,1);if(f.flip)c=1-c;o(c);if(f.driftAmount!=0){var e=f.initialValue-f.value;p(a,f.value+e*.05)}}function m(){g.fireEvent("hoverstop",f);f.hoverItem=-1}function l(a){n(a)}function k(a){p(a,f.initialValue);f.value=f.initialValue;f.hoverItem=Math.floor(f.itemsCount*f.value);g.fireEvent("hoverstart",f)}e=e||250;var f={itemsCount:1,hysteresis:.1,initialValue:.5,flip:false,value:0,hoverItem:-1,driftAmount:0,autoMoveToContain:false,size:e,orientation:b,updatePosition:n,updateValue:o,moveTo:p,moveToContain:q,onsessionstart:k,onsessionupdate:l,onsessionend:m};var g=a();g.eventify(f);var h=false;var i=[0,0,0];var j=c();return f}function l(b){function m(a){k(a)}function l(a){j()}function k(a){d.push($V(a));while(d.length>c){d.shift()}pb=d;var b=true;var f=i(d);for(var g=0;g<f.length;g++){b&=f[g]<n.maxVariance}if(b&&!n.isSteady){n.isSteady=true;e.fireEvent("steady",n);e.fireEvent("steadychanged",n)}else if(!b&&n.isSteady){n.isSteady=false;e.fireEvent("unsteady",n);e.fireEvent("steadychanged",n)}}function j(){d=[];n.isSteady=false}function i(a){if(a.length==0){return[]}var b=Vector.Zero(a[0].dimensions());for(var c=0;c<a.length;c++){b=b.add(a[c])}var d=b.multiply(1/a.length);var e=Matrix.Zero(d.dimensions(),d.dimensions());for(var c=0;c<a.length;c++){var f=a[c].subtract(d);e=e.map(function(a,b,c){return a+f.elements[b-1]*f.elements[c-1]})}var h=g(e);for(var c=0;c<h.length;c++){h[c]=Math.sqrt(Math.abs(h[c]))}return h}function h(a){var b=a.dimensions();var c=b.cols;var d=b.rows;var e=a.map(function(b,e,f){return a.minor(e+1,f+1,c-1,d-1).determinant()});return e}function g(a){var b=a.trace()/3;var c=a.subtract(Matrix.I(3).x(b));var d=c.determinant()/2;var e=c.x(c);var g=f(e)/6;var h=1/3*Math.acos(d/Math.sqrt(g*g*g));if(Math.abs(d)>=Math.abs(Math.sqrt(g*g*g))){h=0}if(h<0){h=h+Math.PI/3}var i=b+2*Math.sqrt(g)*Math.cos(h);var j=b-Math.sqrt(g)*(Math.cos(h)+Math.sqrt(3)*Math.sin(h));var k=b-Math.sqrt(g)*(Math.cos(h)-Math.sqrt(3)*Math.sin(h));return[i,j,k]}function f(a){var b=0;elements=a.elements;for(var c=0;c<elements.length;c++){for(var d=0;d<elements[c].length;d++){b+=elements[c][d]}}return b}if(undefined===b){b=50}var c=15;var d=[];var b=b;var e=a();var n={addPosition:k,maxVariance:b,onsessionstart:l,onsessionupdate:m,isSteady:false};e.eventify(n);return n}function h(a,b){return[a[0]*b[0],a[1]*b[1],a[2]*b[2]]}function g(a,b,c){out=[];for(i=0;i<a.length;i++){out.push(b[i]*c+a[i]*(1-c))}return out}function f(a,b,c){return a+(b-a)*c}function e(a,b,c){return[d(a[0],b[0],c[0]),d(a[1],b[1],c[1]),d(a[2],b[2],c[2])]}function d(a,b,c){if(a<b)return b;if(a>c)return c;return a}function c(){function c(c){c=c||(new Date).getTime();a=a||c;b.lastDelta=(c-a)/1e3;b.fps=1/b.lastDelta;a=c}var a;var b={markframe:c,lastDelta:0,fps:0};return b}function b(a,b){function i(){console.log({center:b,size:a,min:d,max:e})}function h(f){a=$V(a);c=a.multiply(.5);d=b.subtract(c);e=b.add(c)}function g(a){b=$V(a);d=b.subtract(c);e=b.add(c)}function f(a){a=$V(a);return a.e(1)>=d.e(1)&&a.e(1)<=e.e(1)&&a.e(2)>=d.e(2)&&a.e(2)<=e.e(2)&&a.e(3)>=d.e(3)&&a.e(3)<=e.e(3)}if(undefined===b){b=[0,0,0]}if(undefined===a){a=[0,0,0]}var b=$V(b);var a=$V(a);var c=a.multiply(.5);var d=b.subtract(c);var e=b.add(c);return{contains:f,resize:h,recenter:g,inspect:i,getsize:function(){return a},getcenter:function(){return b},getmin:function(){return d},getmax:function(){return e}}}function a(){function h(a){a.addEventListener=c;a.removeEventListener=d;a.addListener=function(b){e(b);g("attach",a,b);return b};a.removeListener=function(b){g("detach",a,b);f(b)};return a}function g(c,d,e){c="on"+c;b.forEach(function(a){if(undefined!==e&&e!=a)return;if(a.hasOwnProperty(c)){try{a[c].call(a,d)}catch(b){console.log("Error calling callback for "+c+": "+b)}}});if(a.hasOwnProperty(c)){a[c].forEach(function(a){if(undefined!==e&&e!=a)return;try{a.call(null,d)}catch(b){console.log("Error calling callback for "+c+": "+b)}})}}function f(a){if(undefined===a){b=[];return}var c=b.indexOf(a);if(c>=0)b.splice(c,1)}function e(a){b.push(a);return a}function d(b,c){b="on"+b;if(!a.hasOwnProperty(b))return;var d=a[b].indexOf(c);if(1>=0)a[b].splice(d,1)}function c(b,c){b="on"+b;if(!a.hasOwnProperty(b)){a[b]=[]}a[b].push(c);return c}var a={};var b=[];return{addEventListener:c,removeEventListener:d,addListener:e,removeListener:f,fireEvent:g,eventify:h}}var j={Invalid:0,Head:1,Neck:2,Torso:3,Waist:4,LeftCollar:5,LeftShoulder:6,LeftElbow:7,LeftWrist:8,LeftHand:9,LeftFingertip:10,RightCollar:11,RightShoulder:12,RightElbow:13,RightWrist:14,RightHand:15,RightFingertip:16,LeftHip:17,LeftKnee:18,LeftAnkle:19,LeftFoot:20,RightHip:21,RightKnee:22,RightAnkle:23,RightFoot:24};var k={X:0,Y:1,Z:2};zig=function(){function F(){var a=D();if(null!=a){A(a)}else{B()}}function E(a){for(var b in navigator.plugins)if(navigator.plugins.hasOwnProperty(b)){var c=navigator.plugins[b];for(var d in c)if(c.hasOwnProperty(d)){if(undefined!==c[d].type&&a==c[d].type){return true}}}return false}function D(){if(typeof C=="undefined"){C=null}if(null==C){var a=document.getElementsByTagName("object");for(var b=0;b<a.length;b++){if(a[b].requestStreams!==undefined){C=a[b];break}}}return C}function B(a){if(null!=D())return;if(undefined===a){a=document.createElement("div");document.body.appendChild(a)}if("string"==typeof a)a=document.getElementById(a);var b='<object id="zigPluginObject" type="application/x-zig" width="0" height="0"><param name="onload" value="zigloaded" /></object>';a.innerHTML=b}function A(a){b=a;w(a,"NewFrame",function(){return function(a){try{var b=JSON.parse(a)}catch(c){console.log("Error parsing JSON from plugin, skipping frame");return}z(b.users)}}());i("inited");h.fireEvent("loaded",a);var c=g.addEventListener;var d=function(b,d){c(b,d);if("loaded"==b){h.fireEvent("loaded",a,d)}};g.addEventListener=d;g.sensorConnected=a.sensorConnected;w(a,"StatusChange",function(a){g.sensorConnected=a;h.fireEvent("statuschange",a)});g.pluginVersion=a.version}function z(b){var e=[];var f=[];for(var j in c)if(c.hasOwnProperty(j)){if(undefined===y(b,j)){var k=c[j];delete c[j];e.push(k)}}for(var l in b)if(b.hasOwnProperty(l)){if(!c.hasOwnProperty(b[l].id)){var m=a();var n=x(b[l]);m.eventify(n);c[n.id]=n;d[n.id]=m;f.push(n)}}for(var j in c)if(c.hasOwnProperty(j)){var o=y(b,j);if(undefined===o){console.log("ERROR!! getItemById returned undefined for userid "+j);console.log(b);console.log(c);continue}c[j].update(y(b,j))}e.forEach(function(a){i("Lost user: "+a.id);a.removeListener();h.fireEvent("userlost",a)});f.forEach(function(a){i("New user: "+a.id);h.fireEvent("userfound",a)});h.fireEvent("dataupdate",g);for(var j in c)if(c.hasOwnProperty(j)){d[j].fireEvent("userupdate",c[j])}}function y(a,b){for(var c in a)if(a.hasOwnProperty(c)){if(a[c].id==b)return a[c]}return undefined}function w(a,b,c){if(a.attachEvent){a.attachEvent("on"+b,c)}else if(a.addEventListener){a.addEventListener(b,c,false)}else{a["on"+b]=c}}function i(a){if(g.verbose)console.log("Zig: "+a)}var b;var c={};var d={};var e={SteadyDetector:l,Fader:m,Fader2D:o,Fader3D:n,PushDetector:p,SwipeDetector:q,WaveDetector:s,Cursor:r};var f="0.96beta";var g={init:A,embed:B,findZigObject:D,pluginInstalled:false,version:f,pluginVersion:0,verbose:true,users:c,sensorConnected:false,Joint:j,Orientation:k,EngageFirstUserInSession:u,EngageUsersWithSkeleton:v,HandSessionDetector:t,controls:e};var h=a();h.eventify(g);var C=null;document.addEventListener("DOMContentLoaded",function(){setTimeout(F,200)},false);g.singleUserSession=u();g.addListener(g.singleUserSession);g.pluginInstalled=E("application/x-zig");return g}();zigloaded=function(){zig.init(zig.findZigObject())};zig.toys=function(){function c(){var a=zig.controls.Cursor();var b=document.createElement("div");b.style.position="fixed";b.style.display="none";b.style.width="50px";b.style.height="50px";b.style.backgroundColor="blue";document.body.appendChild(b);zig.singleUserSession.addEventListener("sessionstart",function(a){b.style.display="block"});zig.singleUserSession.addEventListener("sessionend",function(){b.style.display="none"});a.addEventListener("move",function(c){b.style.left=a.x*window.innerWidth-b.offsetWidth/2+"px";b.style.top=a.y*window.innerHeight-b.offsetHeight/2+"px"});zig.singleUserSession.addListener(a)}function b(){console.log("injecting radar");var b=document.createElement("style");b.type="text/css";b.innerHTML="#zigfuRadar { width:300px;height:300px;bottom:20px;right:20px;border-radius:15px;position:fixed;display:block;background:url(http://cdn.zigfu.com/zigjs/toys/radar.png) } ";b.innerHTML+="#zigfuRadar .user { width:35px; height:35px; position:relative;display:block; background:url(http://cdn.zigfu.com/zigjs/toys/user.png) } ";b.innerHTML+="#zigfuRadar .user.active { background:url(http://cdn.zigfu.com/zigjs/toys/user_active.png) } ";document.getElementsByTagName("head")[0].appendChild(b);var c=document.createElement("div");c.id="zigfuRadar";document.body.appendChild(c);var d=new a(c);zig.addListener(d)}function a(a){this.radarWidth=4e3;this.radarHeight=4e3;this.onuserfound=function(b){var c=document.createElement("div");c.classList.add("user");a.appendChild(c);b.radarElement=c;var d=this;b.addEventListener("userupdate",function(b){var c=b.position[0]/d.radarWidth+.5;var e=b.position[2]/d.radarHeight;var f=b.radarElement;f.style.left=c*a.offsetWidth-f.offsetWidth/2+"px";f.style.top=e*a.offsetHeight-f.offsetHeight/2+"px"})};this.onuserlost=function(b){a.removeChild(b.radarElement);delete b.radarElement};zig.singleUserSession.addEventListener("userengaged",function(a){a.radarElement.classList.add("active")});zig.singleUserSession.addEventListener("userdisengaged",function(a){a.radarElement.classList.remove("active")})}return{injectCursor:c,injectRadar:b}}()})()}